import{a6 as j,a7 as L,l as w,r as N,t as Q,b as D,d as O,k as z,a8 as B,h as M,a9 as F,u as X,H as G,q as H,y as U,z as Y,B as J,V as W,aa as Z,ab as I,ac as K}from"./index.824bfb63.js";import{b as ee}from"./next-frame-once.311e58cd.js";import{g as te}from"./Space.4b1b62fb.js";function ne(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[r,s]=i.split(":");s===void 0?t[""]=r:t[r]=s}),t}function x(e,t){var i;if(e==null)return;const r=ne(e);if(t===void 0)return r[""];if(typeof t=="string")return(i=r[t])!==null&&i!==void 0?i:r[""];if(Array.isArray(t)){for(let s=t.length-1;s>=0;--s){const n=t[s];if(n in r)return r[n]}return r[""]}else{let s,n=-1;return Object.keys(r).forEach(l=>{const o=Number(l);!Number.isNaN(o)&&t>=o&&o>=n&&(n=o,s=r[l])}),s}}function se(e){var t;const i=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:r})=>r===j);return!!(i&&i.value===!1)}const re={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function oe(e){return`(min-width: ${e}px)`}const C={};function ie(e=re){if(!L)return w(()=>[]);if(typeof window.matchMedia!="function")return w(()=>[]);const t=N({}),i=Object.keys(e),r=(s,n)=>{s.matches?t.value[n]=!0:t.value[n]=!1};return i.forEach(s=>{const n=e[s];let l,o;C[n]===void 0?(l=window.matchMedia(oe(n)),l.addEventListener?l.addEventListener("change",d=>{o.forEach(u=>{u(d,s)})}):l.addListener&&l.addListener(d=>{o.forEach(u=>{u(d,s)})}),o=new Set,C[n]={mql:l,cbs:o}):(l=C[n].mql,o=C[n].cbs),o.add(r),l.matches&&o.forEach(d=>{d(l,s)})}),Q(()=>{i.forEach(s=>{const{cbs:n}=C[e[s]];n.has(r)&&n.delete(r)})}),w(()=>{const{value:s}=t;return i.filter(n=>s[n])})}const V=1,P=D("n-grid"),T=1,ae={span:{type:[Number,String],default:T},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ve=O({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ae,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:i,overflowRef:r}=z(P),s=F();return{overflow:r,itemStyle:i,deriveStyle:()=>{e.value;const{privateSpan:n=T,privateShow:l=!0,privateColStart:o=void 0,privateOffset:d=0}=s.vnode.props,{value:u}=t,S=B(u||0);return{display:l?"":"none",gridColumn:`${o!=null?o:`span ${n}`} / span ${n}`,marginLeft:d?`calc((100% - (${n} - 1) * ${S}) / ${n} * ${d} + ${S} * ${d})`:""}}}},render(){var e,t;return M("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}});const le={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},q=24,$="__ssr__",fe={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var ce=O({name:"Grid",inheritAttrs:!1,props:fe,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:i}=X(e),r=/^\d+$/,s=N(void 0),n=ie((i==null?void 0:i.value)||le),l=G(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=w(()=>{if(!!l.value)return e.responsive==="self"?s.value:n.value}),d=G(()=>{var f;return(f=Number(x(e.cols.toString(),o.value)))!==null&&f!==void 0?f:q}),u=G(()=>x(e.xGap.toString(),o.value)),S=G(()=>x(e.yGap.toString(),o.value)),E=f=>{s.value=f.contentRect.width},c=f=>{ee(E,f)},b=N(!1),R=w(()=>{if(e.responsive==="self")return c}),p=N(!1),m=N();return H(()=>{const{value:f}=m;f&&f.hasAttribute($)&&(f.removeAttribute($),p.value=!0)}),U(P,{isSsrRef:p,itemStyleRef:Y(e,"itemStyle"),xGapRef:u,overflowRef:b}),{isSsr:!J,contentEl:m,mergedClsPrefix:t,style:w(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:B(u.value),rowGap:B(S.value)})),isResponsive:l,responsiveQuery:o,responsiveCols:d,handleResize:R,overflow:b}},render(){const e=()=>{var t,i,r,s,n,l,o;this.overflow=!1;const d=Z(te(this)),u=[],{collapsed:S,collapsedRows:E,responsiveCols:c,responsiveQuery:b}=this;d.forEach(a=>{var y,h,v,g;if(((y=a==null?void 0:a.type)===null||y===void 0?void 0:y.__GRID_ITEM__)!==!0)return;if(se(a)){const _=I(a);_.props?_.props.privateShow=!1:_.props={privateShow:!1},u.push({child:_,rawChildSpan:0});return}a.dirs=((h=a.dirs)===null||h===void 0?void 0:h.filter(({dir:_})=>_!==j))||null;const k=I(a),A=Number((g=x((v=k.props)===null||v===void 0?void 0:v.span,b))!==null&&g!==void 0?g:V);A!==0&&u.push({child:k,rawChildSpan:A})});let R=0;const p=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(p!=null&&p.props){const a=(i=p.props)===null||i===void 0?void 0:i.suffix;a!==void 0&&a!==!1&&(R=(s=(r=p.props)===null||r===void 0?void 0:r.span)!==null&&s!==void 0?s:V,p.props.privateSpan=R,p.props.privateColStart=c+1-R,p.props.privateShow=(n=p.props.privateShow)!==null&&n!==void 0?n:!0)}let m=0,f=!1;for(const{child:a,rawChildSpan:y}of u){if(f&&(this.overflow=!0),!f){const h=Number((o=x((l=a.props)===null||l===void 0?void 0:l.offset,b))!==null&&o!==void 0?o:0),v=Math.min(y+h,c);if(a.props?(a.props.privateSpan=v,a.props.privateOffset=h):a.props={privateSpan:v,privateOffset:h},S){const g=m%c;v+g>c&&(m+=c-g),v+m+R>E*c?f=!0:m+=v}}f&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return M("div",K({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[$]:this.isSsr||void 0},this.$attrs),u.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?M(W,{onResize:this.handleResize},{default:e}):e()}});export{ce as _,ve as a};
