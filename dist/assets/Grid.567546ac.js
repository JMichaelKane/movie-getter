import{K as j,M as L,i as g,r as $,k as q,O as D,e as O,P as T,Q as B,h as E,R as X,u as F,S as C,U,t as z,V as W,W as Y,X as M,p as H}from"./index.d1d9fe1a.js";import{g as J}from"./get-slot.40f09d44.js";import{b as Z}from"./next-frame-once.da993024.js";function K(e){if(typeof e=="number")return{"":e.toString()};const n={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[s,t]=i.split(":");t===void 0?n[""]=s:n[s]=t}),n}function _(e,n){var i;if(e==null)return;const s=K(e);if(n===void 0)return s[""];if(typeof n=="string")return(i=s[n])!==null&&i!==void 0?i:s[""];if(Array.isArray(n)){for(let t=n.length-1;t>=0;--t){const r=n[t];if(r in s)return s[r]}return s[""]}else{let t,r=-1;return Object.keys(s).forEach(a=>{const o=Number(a);!Number.isNaN(o)&&n>=o&&o>=r&&(r=o,t=s[a])}),t}}function ee(e){var n;const i=(n=e.dirs)===null||n===void 0?void 0:n.find(({dir:s})=>s===j);return!!(i&&i.value===!1)}const te={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function ne(e){return`(min-width: ${e}px)`}const y={};function se(e=te){if(!L)return g(()=>[]);if(typeof window.matchMedia!="function")return g(()=>[]);const n=$({}),i=Object.keys(e),s=(t,r)=>{t.matches?n.value[r]=!0:n.value[r]=!1};return i.forEach(t=>{const r=e[t];let a,o;y[r]===void 0?(a=window.matchMedia(ne(r)),a.addEventListener?a.addEventListener("change",p=>{o.forEach(u=>{u(p,t)})}):a.addListener&&a.addListener(p=>{o.forEach(u=>{u(p,t)})}),o=new Set,y[r]={mql:a,cbs:o}):(a=y[r].mql,o=y[r].cbs),o.add(s),a.matches&&o.forEach(p=>{p(a,t)})}),q(()=>{i.forEach(t=>{const{cbs:r}=y[e[t]];r.has(s)&&r.delete(s)})}),g(()=>{const{value:t}=n;return i.filter(r=>t[r])})}const V=1,P=D("n-grid"),A=1,re={span:{type:[Number,String],default:A},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ue=O({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:re,setup(){const{xGapRef:e,itemStyleRef:n,overflowRef:i}=T(P),s=X();return{overflow:i,itemStyle:n,deriveStyle:()=>{const{privateSpan:t=A,privateShow:r=!0,privateColStart:a=void 0,privateOffset:o=0}=s.vnode.props,{value:p}=e,u=B(p||0);return{display:r?"":"none",gridColumn:`${a!=null?a:`span ${t}`} / span ${t}`,marginLeft:o?`calc((100% - (${t} - 1) * ${u}) / ${t} * ${o} + ${u} * ${o})`:""}}}},render(){var e,n;return E("div",{style:[this.itemStyle,this.deriveStyle()]},(n=(e=this.$slots).default)===null||n===void 0?void 0:n.call(e,{overflow:this.overflow}))}});const oe={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},Q=24,ie={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:Q},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var pe=O({name:"Grid",inheritAttrs:!1,props:ie,setup(e){const{mergedClsPrefixRef:n,mergedBreakpointsRef:i}=F(e),s=/^\d+$/,t=$(void 0),r=se((i==null?void 0:i.value)||oe),a=C(()=>!!(e.itemResponsive||!s.test(e.cols.toString())||!s.test(e.xGap.toString())||!s.test(e.yGap.toString()))),o=g(()=>{if(!!a.value)return e.responsive==="self"?t.value:r.value}),p=C(()=>{var f;return(f=Number(_(e.cols.toString(),o.value)))!==null&&f!==void 0?f:Q}),u=C(()=>_(e.xGap.toString(),o.value)),N=C(()=>_(e.yGap.toString(),o.value)),G=f=>{t.value=f.contentRect.width},v=f=>{Z(G,f)},R=$(!1),m=g(()=>{if(e.responsive==="self")return v});return U(P,{itemStyleRef:z(e,"itemStyle"),xGapRef:u,overflowRef:R}),{mergedClsPrefix:n,style:g(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${p.value}, minmax(0, 1fr))`,columnGap:B(u.value),rowGap:B(N.value)})),isResponsive:a,responsiveQuery:o,responsiveCols:p,handleResize:m,overflow:R}},render(){const e=()=>{var n,i,s,t,r,a,o;this.overflow=!1;const p=Y(J(this)),u=[],{collapsed:N,collapsedRows:G,responsiveCols:v,responsiveQuery:R}=this;p.forEach(l=>{var w,c,d,h;if(((w=l==null?void 0:l.type)===null||w===void 0?void 0:w.__GRID_ITEM__)!==!0)return;if(ee(l)){const S=M(l);S.props?S.props.privateShow=!1:S.props={pirvateShow:!1},u.push({child:S,rawChildSpan:0});return}l.dirs=((c=l.dirs)===null||c===void 0?void 0:c.filter(({dir:S})=>S!==j))||null;const k=M(l),I=Number((h=_((d=k.props)===null||d===void 0?void 0:d.span,R))!==null&&h!==void 0?h:V);I!==0&&u.push({child:k,rawChildSpan:I})});let m=0;const f=(n=u[u.length-1])===null||n===void 0?void 0:n.child;if(f!=null&&f.props){const l=(i=f.props)===null||i===void 0?void 0:i.suffix;l!==void 0&&l!==!1&&(m=(t=(s=f.props)===null||s===void 0?void 0:s.span)!==null&&t!==void 0?t:V,f.props.privateSpan=m,f.props.privateColStart=v+1-m,f.props.privateShow=(r=f.props.privateShow)!==null&&r!==void 0?r:!0)}let b=0,x=!1;for(const{child:l,rawChildSpan:w}of u){if(x&&(this.overflow=!0),!x){const c=Number((o=_((a=l.props)===null||a===void 0?void 0:a.offset,R))!==null&&o!==void 0?o:0),d=Math.min(w+c,v);if(l.props?(l.props.privateSpan=d,l.props.privateOffset=c):l.props={privateSpan:d,privateOffset:c},N){const h=b%v;d+h>v&&(b+=v-h),d+b+m>G*v?x=!0:b+=d}}x&&(l.props?l.props.privateShow!==!0&&(l.props.privateShow=!1):l.props={privateShow:!1})}return E("div",H({class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),u.map(({child:l})=>l))};return this.isResponsive&&this.responsive==="self"?E(W,{onResize:this.handleResize},{default:e}):e()}});export{ue as _,pe as a};
